---
import { getCollection } from 'astro:content';
import OuterLayout from '../../layouts/OuterLayout.astro';
import BlogPostPreview from '../../components/BlogPostPreview.svelte'

const posts = (await getCollection('blog'))
.filter((post) => !post.data.draft)
.sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<OuterLayout>
	<section>
		<div class="panel">
			<h2 class="text-3xl text-center mb-6">Blog Posts</h2>
			<div class="flex flex-col md:flex-row space-y-6 md:space-y-0 justify-around text-lg">
				<div class="text-center space-y-0">
					<div>Subscribe by Email</div>
					<div><a class="link text-lg" href="/newsletter">Newsletter</a></div>
				</div>		
				<div class="text-center space-y-0">
					<div class="text-lg">Subscribe by RSS</div>
					<code class="inline-block text-sm md:text-md text-center p-2">https://caseywatts.com/rss.xml</code>
				</div>
			</div>
		</div>
		<ul>
			{
				posts.map((post) => (
					<BlogPostPreview post={post} />
				))
			}
		</ul>
	</section>
</OuterLayout>
